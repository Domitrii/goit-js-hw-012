{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/creater.js","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42057283-adafa6fc2ce046555d94b0faa';\n\nfunction giveApiKey(q, page = 1){\n    return axios.get(`${BASE_URL}`,{\n        params: {\n            key: API_KEY,\n            q: q,\n            per_page: 12,\n            lang: \"en\",\n            page,\n        }\n    }).then(({data}) => data)\n}\n\nexport {giveApiKey}","export default function appendArticlesMarkup(hits , gallery) {\n    const markup = hits\n      .map(\n        ({webformatURL,largeImageURL,tags,likes,views,comments,downloads,}) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n            <p class=\"gallery-descr\">\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"../icons.svg#icon-heart\"></use>\n            </svg>\n            <span class=\"descr-span\">${likes}</span> \n            </span>\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"../icons.svg#icon-eye\"></use>\n            </svg>\n            <span class=\"descr-span\">${views}</span> \n            </span>\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"../icons.svg#icon-bubble2\"></use>\n            </svg>\n            <span class=\"descr-span\">${comments}</span> \n            </span>\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"../icons.svg#icon-arrow-down\"></use>\n            </svg>\n            <span class=\"descr-span\">${downloads}</span>\n            </span>\n            </p>\n          </a>\n        </li>`\n      )\n      .join(\"\");\n  \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n  }","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nimport \"https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js\";\nimport {giveApiKey} from \"./js/api.js\";\nimport appendArticlesMarkup from './js/creater.js'\n\nlet loading = document.querySelector('.loading');\n\nconst refs = {\n    form: document.querySelector('.form'),  \n    input: document.querySelector('.form-input'), \n    gallery: document.querySelector('.gallery'),\n    searchBtn: document.querySelector('.search-button'), \n    loadMoreBtn: document.querySelector('.dead-end-btn'),\n    waiter: document.querySelector('.please-wait'),\n    noMore: document.querySelector('.no-more'),\n};\n\nconst hiddenClass = 'is-hidden';\nlet page = 1;\nlet query = '';\nlet maxPage = 0;\nlet per_page = 12;\n\n\nfunction showErrorMessage(message) {\n    iziToast.show({\n      position: 'topLeft',\n      message,\n      backgroundColor: '#EF4040',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      close: false,\n      closeOnClick: true,\n      closeOnEscape: true,\n    });\n  }\n\n  const lightbox = new SimpleLightbox('.gallery-item a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\nrefs.form.addEventListener('submit', submitFunction);\n\nfunction hideLoader() {\n    setTimeout(() => {\n        loading.classList.add('is-hidden');\n        }, 500);\n  };\n\n  function showLoader() {\n    loading.classList.remove('is-hidden')\n  }; \n\nasync function submitFunction(event){\n    event.preventDefault();\n    refs.gallery.innerHTML = ''\n    showLoader()\n    const form = event.currentTarget\n    query = form.elements.input.value.trim();\ntry{\n    const {hits, totalHits} = await giveApiKey(query);\n\n    maxPage = Math.ceil(totalHits / per_page)\n    console.log(maxPage)\n\n    hideLoader()\n    appendArticlesMarkup(hits, refs.gallery)\n    lightbox.refresh();\n    if(hits.length > 0 & hits.length !== totalHits){\n        refs.loadMoreBtn.classList.remove(hiddenClass)\n        refs.loadMoreBtn.addEventListener('click', handleLoadMore)\n    } else {\n        refs.loadMoreBtn.classList.add(hiddenClass)\n        showErrorMessage(\n            `Sorry, incorrect input value`\n        )\n    }\n} catch (error) {\n    console.error(error)\n} finally{\n    form.reset()\n}\n}\n\nasync function handleLoadMore(){\n    refs.loadMoreBtn.classList.add(hiddenClass)\n    refs.waiter.classList.remove(hiddenClass)\n    page += 1;\n\n    try{\n        const {hits} = await giveApiKey(query, page);\n        appendArticlesMarkup(hits, refs.gallery)\n        lightbox.refresh();\n        refs.waiter.classList.add(hiddenClass)\n    } catch (err) {\n        console.log(err)\n    } finally {\n        refs.loadMoreBtn.classList.remove(hiddenClass)\n        if(page === maxPage){\n            refs.loadMoreBtn.classList.add(hiddenClass)\n            refs.loadMoreBtn.removeEventListener('click', handleLoadMore)\n            refs.noMore.classList.remove(hiddenClass)\n        }\n    }\n}\n\nwindow.scrollBy(2)"],"names":["BASE_URL","API_KEY","giveApiKey","q","page","data","appendArticlesMarkup","hits","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loading","refs","hiddenClass","query","maxPage","per_page","showErrorMessage","message","iziToast","lightbox","SimpleLightbox","submitFunction","hideLoader","showLoader","event","form","totalHits","handleLoadMore","error","err"],"mappings":"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"}