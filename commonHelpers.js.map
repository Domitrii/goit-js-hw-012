{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/img/icons.svg","../src/js/creater.js","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42057283-adafa6fc2ce046555d94b0faa';\n\nasync function giveApiKey(q, page = 1){\n    try{\n        let data = await axios.get(`${BASE_URL}`,{\n            params: {\n                key: API_KEY,\n                q: q,\n                per_page: 15,\n                lang: \"en\",\n                page,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n            }\n        })\n        const resp = await data.data\n        return resp\n    } catch(err) {\n        console.log(err)\n    }\n}\n\nexport {giveApiKey}","export default \"__VITE_ASSET__f9984085__\"","import icons from '../img/icons.svg'\n\nexport default function appendArticlesMarkup(hits , gallery) {\n    const markup = hits\n      .map(\n        ({webformatURL,largeImageURL,tags,likes,views,comments,downloads,}) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n            <p class=\"gallery-descr\">\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"${icons}#icon-heart\"></use>\n            </svg>\n            <span class=\"descr-span\">${likes}</span> \n            </span>\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"${icons}#icon-eye\"></use>\n            </svg>\n            <span class=\"descr-span\">${views}</span> \n            </span>\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"${icons}#icon-bubble2\"></use>\n            </svg>\n            <span class=\"descr-span\">${comments}</span> \n            </span>\n            <span class=\"cont-in-p\">\n            <svg\n            width=\"20\"\n            height=\"20\"\n            class=\"icon-in-block\">\n            <use href=\"${icons}#icon-arrow-down\"></use>\n            </svg>\n            <span class=\"descr-span\">${downloads}</span>\n            </span>\n            </p>\n          </a>\n        </li>`\n      )\n      .join(\"\");\n  \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n  }","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nimport \"https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js\";\nimport {giveApiKey} from \"./js/api.js\";\nimport appendArticlesMarkup from './js/creater.js'\n\nlet loading = document.querySelector('.loading');\n\nconst refs = {\n    form: document.querySelector('.form'),  \n    input: document.querySelector('.form-input'), \n    gallery: document.querySelector('.gallery'),\n    searchBtn: document.querySelector('.search-button'), \n    loadMoreBtn: document.querySelector('.dead-end-btn'),\n    waiter: document.querySelector('.please-wait'),\n    noMore: document.querySelector('.no-more'),\n};\n\nconst hiddenClass = 'is-hidden';\nlet page = 1;\nlet query = '';\nlet maxPage = 0;\nlet per_page = 15;\n\n\n\nfunction showErrorMessage(message) {\n    iziToast.show({\n      position: 'topLeft',\n      message,\n      backgroundColor: '#EF4040',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      close: false,\n      closeOnClick: true,\n      closeOnEscape: true,\n    });\n  }\n\n  const lightbox = new SimpleLightbox('.gallery-item a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\nrefs.form.addEventListener('submit', submitFunction);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMore)\nfunction hideLoader() {\n    setTimeout(() => {\n        loading.classList.add(hiddenClass);\n        }, 500);\n  };\n\n  function showLoader() {\n    loading.classList.remove(hiddenClass)\n  }; \n\nasync function submitFunction(event){\n    event.preventDefault();\n    refs.gallery.innerHTML = ''\n    showLoader()\n    page = 1;\n    const form = event.currentTarget\n    query = form.elements.input.value.trim();\n    if(query == ''){\n        loading.classList.add(hiddenClass)\n        refs.loadMoreBtn.classList.add(hiddenClass)\n        refs.noMore.classList.add(hiddenClass)\n        return;\n    }\n    refs.noMore.classList.add(hiddenClass)\ntry{\n    const {hits, totalHits} = await giveApiKey(query);\n    maxPage = Math.ceil(totalHits / per_page)\n\n    hideLoader()\n    appendArticlesMarkup(hits, refs.gallery)\n    lightbox.refresh();\n    if(hits.length > 0 && hits.length !== totalHits){\n        refs.loadMoreBtn.classList.remove(hiddenClass)\n    } else {\n        refs.loadMoreBtn.classList.add(hiddenClass)\n        showErrorMessage(\n            `Sorry, incorrect input value`\n        )\n    }\n} catch (error) {\n    console.error(error)\n} finally{\n    form.reset()\n}\n}\n\nasync function handleLoadMore(){\n    refs.loadMoreBtn.classList.add(hiddenClass)\n    refs.waiter.classList.remove(hiddenClass)\n    page += 1;\n\n    try{\n        const {hits} = await giveApiKey(query, page);\n        appendArticlesMarkup(hits, refs.gallery)\n        lightbox.refresh();\n        refs.waiter.classList.add(hiddenClass)\n    } catch (err) {\n        console.log(err)\n    } finally {\n        refs.loadMoreBtn.classList.remove(hiddenClass)\n        if(page === maxPage){\n            refs.loadMoreBtn.classList.add(hiddenClass)\n            refs.loadMoreBtn.removeEventListener('click', handleLoadMore)\n            refs.noMore.classList.remove(hiddenClass)\n        }\n    }\n}\n"],"names":["BASE_URL","API_KEY","giveApiKey","q","page","err","icons","appendArticlesMarkup","hits","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loading","refs","hiddenClass","query","maxPage","per_page","showErrorMessage","message","iziToast","lightbox","SimpleLightbox","submitFunction","handleLoadMore","hideLoader","showLoader","event","form","totalHits","error"],"mappings":"g0BAAA,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,eAAeC,EAAWC,EAAGC,EAAO,EAAE,CAClC,GAAG,CAcC,OADa,MAZF,MAAM,MAAM,IAAI,GAAGJ,IAAW,CACrC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,SAAU,GACV,KAAM,KACN,KAAAC,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EACf,CACb,CAAS,GACuB,IAE3B,OAAOC,EAAN,CACE,QAAQ,IAAIA,CAAG,CAClB,CACL,CCtBA,MAAeC,EAAA,4CCEA,SAASC,EAAqBC,EAAOC,EAAS,CACzD,MAAMC,EAASF,EACZ,IACC,CAAC,CAAC,aAAAG,EAAa,cAAAC,EAAc,KAAAC,EAAK,MAAAC,EAAM,MAAAC,EAAM,SAAAC,EAAS,UAAAC,CAAS,IAAO;AAAA;AAAA,0CAErCL;AAAA;AAAA;AAAA,mBAGvBD;AAAA,mBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAQMP;AAAA;AAAA,uCAEcQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAOdR;AAAA;AAAA,uCAEcS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAOdT;AAAA;AAAA,uCAEcU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAOdV;AAAA;AAAA,uCAEcW;AAAA;AAAA;AAAA;AAAA,cAKhC,EACA,KAAK,EAAE,EAEVR,EAAQ,mBAAmB,YAAaC,CAAM,CAClD,CChDA,IAAIQ,EAAU,SAAS,cAAc,UAAU,EAE/C,MAAMC,EAAO,CACT,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,aAAa,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,UAAW,SAAS,cAAc,gBAAgB,EAClD,YAAa,SAAS,cAAc,eAAe,EACnD,OAAQ,SAAS,cAAc,cAAc,EAC7C,OAAQ,SAAS,cAAc,UAAU,CAC7C,EAEMC,EAAc,YACpB,IAAIhB,EAAO,EACPiB,EAAQ,GACRC,EAAU,EACVC,EAAW,GAIf,SAASC,EAAiBC,EAAS,CAC/BC,EAAS,KAAK,CACZ,SAAU,UACV,QAAAD,EACA,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,MAAO,GACP,aAAc,GACd,cAAe,EACrB,CAAK,CACF,CAED,MAAME,EAAW,IAAIC,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GAClB,CAAG,EAEHT,EAAK,KAAK,iBAAiB,SAAUU,CAAc,EACnDV,EAAK,YAAY,iBAAiB,QAASW,CAAc,EACzD,SAASC,GAAa,CAClB,WAAW,IAAM,CACbb,EAAQ,UAAU,IAAIE,CAAW,CAChC,EAAE,GAAG,CAEd,CACE,SAASY,GAAa,CACpBd,EAAQ,UAAU,OAAOE,CAAW,CAExC,CACA,eAAeS,EAAeI,EAAM,CAChCA,EAAM,eAAc,EACpBd,EAAK,QAAQ,UAAY,GACzBa,EAAY,EACZ5B,EAAO,EACP,MAAM8B,EAAOD,EAAM,cAEnB,GADAZ,EAAQa,EAAK,SAAS,MAAM,MAAM,KAAI,EACnCb,GAAS,GAAG,CACXH,EAAQ,UAAU,IAAIE,CAAW,EACjCD,EAAK,YAAY,UAAU,IAAIC,CAAW,EAC1CD,EAAK,OAAO,UAAU,IAAIC,CAAW,EACrC,MACH,CACDD,EAAK,OAAO,UAAU,IAAIC,CAAW,EACzC,GAAG,CACC,KAAM,CAAC,KAAAZ,EAAM,UAAA2B,CAAS,EAAI,MAAMjC,EAAWmB,CAAK,EAChDC,EAAU,KAAK,KAAKa,EAAYZ,CAAQ,EAExCQ,EAAY,EACZxB,EAAqBC,EAAMW,EAAK,OAAO,EACvCQ,EAAS,QAAO,EACbnB,EAAK,OAAS,GAAKA,EAAK,SAAW2B,EAClChB,EAAK,YAAY,UAAU,OAAOC,CAAW,GAE7CD,EAAK,YAAY,UAAU,IAAIC,CAAW,EAC1CI,EACI,8BACH,EAET,OAASY,EAAP,CACE,QAAQ,MAAMA,CAAK,CACvB,QAAS,CACLF,EAAK,MAAO,CAChB,CACA,CAEA,eAAeJ,GAAgB,CAC3BX,EAAK,YAAY,UAAU,IAAIC,CAAW,EAC1CD,EAAK,OAAO,UAAU,OAAOC,CAAW,EACxChB,GAAQ,EAER,GAAG,CACC,KAAM,CAAC,KAAAI,CAAI,EAAI,MAAMN,EAAWmB,EAAOjB,CAAI,EAC3CG,EAAqBC,EAAMW,EAAK,OAAO,EACvCQ,EAAS,QAAO,EAChBR,EAAK,OAAO,UAAU,IAAIC,CAAW,CACxC,OAAQf,EAAP,CACE,QAAQ,IAAIA,CAAG,CACvB,QAAc,CACNc,EAAK,YAAY,UAAU,OAAOC,CAAW,EAC1ChB,IAASkB,IACRH,EAAK,YAAY,UAAU,IAAIC,CAAW,EAC1CD,EAAK,YAAY,oBAAoB,QAASW,CAAc,EAC5DX,EAAK,OAAO,UAAU,OAAOC,CAAW,EAE/C,CACL"}